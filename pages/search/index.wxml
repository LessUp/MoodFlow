<view class="container {{theme === 'dark' ? 'theme-dark' : 'theme-light'}}">
  <view class="section">
    <view class="label">关键词</view>
    <input class="input" placeholder="搜索备注/日期/表情" value="{{keyword}}" bindinput="onKeywordInput" />
  </view>

  <view class="section">
    <view class="label">日期范围</view>
    <view class="row">
      <picker mode="date" value="{{startDate}}" bindchange="onStartChange"><view class="picker">{{startDate}}</view></picker>
      <text class="sep">至</text>
      <picker mode="date" value="{{endDate}}" bindchange="onEndChange"><view class="picker">{{endDate}}</view></picker>
    </view>
  </view>

  <view class="section">
    <view class="label">表情过滤</view>
    <view class="emoji-grid">
      <block wx:for="{{emojiOptions}}" wx:key="*this">
        <view class="emoji {{selectedEmojis[item] ? 'on' : ''}}" data-em="{{item}}" bindtap="onEmojiToggle">{{item}}</view>
      </block>
    </view>
  </view>

  <view class="section">
    <view class="row">
      <button class="primary" bindtap="doSearch">搜索</button>
      <button class="plain" bindtap="onClearFilters">清空</button>
    </view>
  </view>

  <view class="section">
    <view class="label">结果</view>
    <block wx:if="{{results.length === 0}}">
      <view class="empty">暂无匹配记录</view>
    </block>
    <view class="list" wx:else>
      <block wx:for="{{results}}" wx:key="dateKey">
        <view class="item" data-datekey="{{item.dateKey}}" bindtap="onItemTap">
          <view class="left">
            <view class="dk">{{item.dateKey}}</view>
            <view class="note">{{item.note}}</view>
          </view>
          <view class="right">{{item.mood}}</view>
        </view>
      </block>
    </view>
  </view>
</view>
